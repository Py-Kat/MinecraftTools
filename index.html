<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Crafting Raw Material Calculator</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root{
    --bg:#0f1724;
    --card:#0b1220;
    --muted:#9aa7bd;
    --accent:#7dd3fc;
    --success:#86efac;
    font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }
  body{
    background:linear-gradient(180deg,#071025 0%,var(--bg) 100%);
    color:#e6eef7;
    margin:0;
    padding:28px;
    min-height:100vh;
  }
  .container{max-width:980px;margin:0 auto;}
  header{display:flex;align-items:center;gap:16px;margin-bottom:20px;justify-content:space-between;}
  h1{margin:0;font-size:20px;}
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    padding:18px;
    border-radius:12px;
    box-shadow:0 6px 18px rgba(3,7,18,0.6);
    border:1px solid rgba(255,255,255,0.03)
  }
  .grid{display:grid;grid-template-columns:1fr 360px;gap:16px}
  label{font-size:13px;color:var(--muted)}
  input[type="number"], select, input[type="text"], textarea{
    width:100%;padding:8px 10px;margin-top:6px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-size:14px;
  }
  select{background-color:black;color:white;}
  button{
    background:linear-gradient(90deg,var(--accent),#60a5fa);
    color:#042028;padding:6px 10px;border:none;border-radius:8px;font-weight:600;cursor:pointer;font-size:12px;
  }
  .muted{color:var(--muted);font-size:13px}
  .results{margin-top:12px}
  .small{font-size:13px}
  .recipe-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;gap:8px}
  .recipe-text{flex:1}
  .chip{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:8px;font-size:13px}
  .raw-list{display:flex;flex-direction:column;gap:6px}
  .footer{margin-top:14px;color:var(--muted);font-size:13px}
  .leftpanel{display:flex;flex-direction:column;gap:12px}
  .rightpanel{display:flex;flex-direction:column;gap:12px}
  .textarea{min-height:120px;resize:vertical}
  .code{background:rgba(255,255,255,0.02);padding:8px;border-radius:6px;font-family:monospace;font-size:13px;white-space:pre-wrap}
  .github-btn img{width:28px;height:28px;filter:invert(1);}
  .github-btn:hover img{transform:scale(1.1);transition:0.2s;}
  @media (max-width:900px){ .grid{grid-template-columns:1fr; } }
</style>
</head>
<body>
<div class="container">
  <header>
    <div style="display:flex;align-items:center;gap:16px;">
      <div class="card" style="display:inline-block;padding:10px 12px;">ðŸš€</div>
      <div>
        <h1>Crafting Raw Material Calculator</h1>
        <div class="muted">Select an item, enter quantity, and calculate how many raw materials you need. Recipes expand recursively.</div>
      </div>
    </div>
    <a class="github-btn" href="https://github.com/RedClaws1800/MinecraftTools" target="_blank">
      <img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/github.svg" alt="GitHub">
    </a>
  </header>

  <div class="grid">
    <!-- LEFT PANEL -->
    <div class="leftpanel card">
      <div>
        <label>Choose item to craft</label>
        <select id="itemSelect"></select>
      </div>

      <div style="display:flex;gap:8px;align-items:end;margin-top:8px">
        <div style="flex:1">
          <label>Quantity</label>
          <input id="qty" type="number" value="1" min="1" />
        </div>
        <div>
          <button id="calcBtn">Calculate</button>
        </div>
      </div>

      <div class="results" id="resultsArea"></div>
    </div>

    <!-- RIGHT PANEL -->
    <div class="rightpanel">
      <div class="card">
        <h3 style="margin-top:0">Raw Materials Needed</h3>
        <div id="rawList" class="raw-list muted">No calculation yet.</div>
      </div>

      <div class="card">
        <h3 style="margin-top:0">Recipes (editable)</h3>
        <div id="recipeList" class="small muted"></div>
      </div>
    </div>
  </div>
</div>

<script>
const presetRecipes = {
  "Oak Plank": { yield:4, ingredients:[{name:"Oak Log", amount:1}] },
  "Stick": { yield:4, ingredients:[{name:"Oak Plank", amount:2}]},
  "Crafting Table": { yield:1, ingredients:[{name:"Oak Plank", amount:4}]},
  "Chest": { yield:1, ingredients:[{name:"Oak Plank", amount:8}]},
  "Glass": { yield:1, ingredients:[{name:"Sand", amount:1}]},
  "Glass Pane": { yield:16, ingredients:[{name:"Glass", amount:6}]},
  "Stone": { yield:1, ingredients:[{name:"Cobblestone", amount:1}]},
  "Stone Bricks": { yield:4, ingredients:[{name:"Stone", amount:4}]},
  "Torch": { yield:4, ingredients:[{name:"Coal", amount:1}, {name:"Stick", amount:1}]},
  "Furnace": { yield:1, ingredients:[{name:"Cobblestone", amount:8}]},
  "Stone Slab": { yield:6, ingredients:[{name:"Stone", amount:3}]},
  "Oak Door": { yield:3, ingredients:[{name:"Oak Plank", amount:6}]},
  "Wood Stairs": { yield:4, ingredients:[{name:"Oak Plank", amount:6}]},
  "Wood Fence": { yield:3, ingredients:[{name:"Oak Plank", amount:4}, {name:"Stick", amount:2}]},
  "Wood Fence Gate": { yield:1, ingredients:[{name:"Oak Plank", amount:4}, {name:"Stick", amount:2}]},
  "Wood Slab": { yield:6, ingredients:[{name:"Oak Plank", amount:3}]}
};

let recipes = JSON.parse(localStorage.getItem("craft_recipes_v1") || "null") || presetRecipes;

function saveRecipes() {
  localStorage.setItem("craft_recipes_v1", JSON.stringify(recipes));
}

function updateItemSelect() {
  const sel = document.getElementById("itemSelect");
  sel.innerHTML = "";
  Object.keys(recipes).sort().forEach(name => {
    const opt = document.createElement("option");
    opt.value = name;
    opt.textContent = name;
    sel.appendChild(opt);
  });
}

function renderRecipes() {
  const node = document.getElementById("recipeList");
  node.innerHTML = "";
  Object.keys(recipes).sort().forEach(key=>{
    const r = recipes[key];
    const div = document.createElement("div");
    div.className = "recipe-row";
    
    const text = document.createElement("div");
    text.className = "recipe-text";
    const ing = r.ingredients.map(i=>`${i.amount} Ã— ${i.name}`).join(", ");
    text.innerHTML = `<strong>${key}</strong> â€” yield: ${r.yield} â€” ingredients: ${ing}`;
    
    const delBtn = document.createElement("button");
    delBtn.textContent = "Delete";
    delBtn.addEventListener("click", ()=>{
      delete recipes[key];
      saveRecipes();
      updateItemSelect();
      renderRecipes();
    });

    div.appendChild(text);
    div.appendChild(delBtn);
    node.appendChild(div);
  });
}

function calculateRequirements(targetName, targetQty) {
  const need = {}; 
  const pending = {}; 
  pending[targetName] = (pending[targetName] || 0) + targetQty;
  while(true){
    const keys = Object.keys(pending);
    if(keys.length===0) break;
    let item=null;
    for(let k of keys){ if(recipes[k]) {item=k; break;} }
    if(!item){ 
      keys.forEach(k=>{ 
        need[k]=(need[k]||0)+pending[k]; 
        delete pending[k];
      }); 
      break;
    }
    const amount = pending[item]; 
    delete pending[item];
    const r = recipes[item]; 
    const ops=Math.ceil(amount/r.yield);
    r.ingredients.forEach(i=>{ pending[i.name]=(pending[i.name]||0)+i.amount*ops; });
  }
  return Object.keys(need).sort().map(k=>({name:k, amount:need[k]}));
}

document.getElementById("calcBtn").addEventListener("click", ()=>{
  const item=document.getElementById("itemSelect").value;
  const qty=Math.max(1,Number(document.getElementById("qty").value)||1);
  const raw=calculateRequirements(item,qty);
  const rawNode=document.getElementById("rawList");
  rawNode.innerHTML='';
  if(raw.length===0) rawNode.innerHTML='<div class="muted">No raw materials required.</div>';
  else raw.forEach(r=>{
    const div=document.createElement("div");
    div.innerHTML=`<strong>${r.name}</strong> Ã— ${r.amount}`;
    rawNode.appendChild(div);
  });
});

updateItemSelect();
renderRecipes();
</script>
</body>
</html>
